{% extends 'base.html' %}
{% load i18n %}
{% comment %}This template is used to add recipes{% endcomment %}
{% block title %}{% trans "OpenEats | Add Recipe" %} {% endblock %}
{% block jscript %}
 <script type="text/javascript" src="{{ MEDIA_URL }}js/jquery/jquery.formset.js"></script>
 <script type="text/javascript" src="{{ MEDIA_URL }}js/RelatedObjectLookups.js"></script>
 <script type="text/javascript" src="{{ MEDIA_URL }}js/jqtransformplugin/jquery.jqtransform.js"></script>
 <script type="text/javascript" src="{{ MEDIA_URL }}js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
 <script type="text/javascript">
     tinyMCE.init({
         mode : "textareas",
         theme : "simple"

     });
 </script>
 <script type="text/javascript" src="{{ MEDIA_URL }}js/oe.js"></script>
 <script type="text/javascript">

     function stopRKey(evt) {
         var evt = (evt) ? evt : ((event) ? event : null);
         var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
         if ((evt.keyCode == 13) && (node.type=="text"))  {return false;}
     }

     document.onkeypress = stopRKey;

 </script>
{% endblock %}
{% block content %}
<form action="" enctype="multipart/form-data" method="post">{% csrf_token %}
    <div id="recipe-form">
     
        {{ form.title.errors }}
        <p>{{ form.title.label_tag|lower }} {{ form.title }}</p>
    
        {{ form.photo.errors }}
        <p>{{ form.photo.label_tag|lower }}{{ form.photo }} </p>

        {{ form.course.errors }}
        <p>{{ form.course.label_tag|lower }}{{ form.course }} </p>
        

        {{ form.cuisine.errors }}
        <p>{{ form.cuisine.label_tag|lower }} {{ form.cuisine }}</p>

        {{ form.info.errors }}
        <p>{{ form.info.label_tag|lower }} {{ form.info }} <em>{{ form.info.help_text }}</em></p>
       

        {{ form.cook_time.errors }}
        <p>{{ form.cook_time.label_tag|lower }} {{ form.cook_time }} <em>{{ form.cook_time.help_text }}</em></p>

        {{ form.servings.errors }}
        <p>{{ form.servings.label_tag|lower }} {{ form.servings }}</p>

        {{ form.directions.errors }}
        <p>{{ form.directions.label_tag|lower }} {{ form.directions }}</p>

        {{ form.shared.errors }}
        <p>{{ form.shared.label_tag|lower }} {{ form.shared }} <em>{{ form.shared.help_text }}</em></p>
        {{ form.related.errors }}
        <p>{{ form.related.label_tag|lower }} {{ form.related }} <em>{{ form.related.help_text }}</em></p>
       <br />
        <p>{{ form.tags.label_tag|lower }} {{ form.tags }}<em>{{ form.tags.help_text }}</em></p>

        <input type="hidden" id="id_author" name="author" value="{{ user.id }}" />
        <!-- ugh going to do a form here since it is tabular data but still don't like it -->
        <div id="ingredients">
            <p>{{ formset.non_form_errors }}</p>
            <table id="ing-grid">
                <thead>
                    <tr>
                        <th>{% trans "ingredients" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {{ formset.management_form }}
                    {% for field in formset.forms %}
                    <tr class="{% cycle 'row1' 'row2' %}" id="ing-{{ forloop.counter }}">
                        <td>{{ field.quantity.label_tag|lower }}</td>
                        <td id="quantity">{{ field.quantity }}</td>
                        <td>{{ field.measurement.label_tag|lower }}</td>
                        <td id="measurement"">{{ field.measurement }}</td>
                        <td>{{ field.title.label_tag|lower }}</td>
                        <td id="ing-field">{{ field.title }}</td>
                        <td>{{ field.preparation.label_tag|lower }}</td>
                        <td id="preparation">{{ field.preparation }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
     
        </div>
    </div>

    <p><input type="submit" value="{% trans "New Recipe" %}" /></p>
</form>

{% endblock %}



